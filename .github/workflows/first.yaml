on:
  workflow_dispatch:
  push:

jobs:
  deploy:
    runs-on: ubuntu-latest
    name: Deploying to Azure
    steps:
      - name: ðŸ›’ Checkout
        uses: actions/checkout@v2
      - name: ðŸ”Ž Check IP
        run: curl https://api.ipify.org
  
      - name: Add NSG Rule
        uses: venura9/manage-nsg@master
        id: rule
        with:
          azure-credentials: ${{ secrets.AZURE_CREDENTIALS }}
          rule-nsg-resource-group-name: myresource
          rule-nsg-name: SShazure
          rule-priority-start: "100"
          rule-priority-range: "*"
          rule-inbound-port: "22"
          
